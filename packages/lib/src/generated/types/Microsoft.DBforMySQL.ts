/**
 * Type definitions for Microsoft.DBforMySQL resources.
 *
 * **API Version**: 2024-12-01-preview
 * **Generated**: 2025-10-13T00:00:00.000Z
 * **Source**: Azure ARM Schema - Microsoft.DBforMySQL/flexibleServers
 *
 * @remarks
 * This file is auto-generated. Do not edit manually.
 * Generated by Felix (Schema & Validation Engineer)
 *
 * @packageDocumentation
 */

/**
 * User-assigned managed identity.
 *
 * @remarks
 * Represents a user-assigned managed identity for the MySQL server.
 */
export interface UserAssignedIdentity {
  /**
   * Client ID of the identity.
   *
   * @remarks
   * Read-only property. The client ID (application ID) of the identity.
   */
  readonly clientId?: string;

  /**
   * Principal ID of the identity.
   *
   * @remarks
   * Read-only property. The principal ID (object ID) of the identity.
   */
  readonly principalId?: string;
}

/**
 * Managed identity configuration.
 *
 * @remarks
 * Configures managed identity for the MySQL flexible server.
 */
export interface MySqlIdentity {
  /**
   * Identity type.
   *
   * @remarks
   * Currently only UserAssigned identity type is supported.
   */
  readonly type: 'UserAssigned';

  /**
   * User-assigned identities.
   *
   * @remarks
   * Dictionary of user-assigned managed identities, keyed by resource ID.
   *
   * @example
   * {
   *   '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}': {}
   * }
   */
  readonly userAssignedIdentities?: Record<string, UserAssignedIdentity>;
}

/**
 * SKU (pricing tier) for MySQL flexible server.
 *
 * @remarks
 * Defines the compute and pricing tier for the MySQL flexible server.
 */
export interface MySqlSku {
  /**
   * SKU name.
   *
   * Constraints:
   * - Required
   *
   * @remarks
   * The name of the SKU, typically includes tier and size.
   * Format varies by tier (e.g., 'Standard_B1s', 'Standard_D2ds_v4').
   *
   * @example 'Standard_D2ds_v4'
   */
  readonly name: string;

  /**
   * Pricing tier.
   *
   * Constraints:
   * - Required
   *
   * Available values:
   * - Burstable: Cost-effective for workloads with low CPU utilization
   * - GeneralPurpose: Balanced compute and memory
   * - MemoryOptimized: High memory-to-CPU ratio
   *
   * @example 'GeneralPurpose'
   */
  readonly tier: 'Burstable' | 'GeneralPurpose' | 'MemoryOptimized';
}

/**
 * Backup configuration for MySQL flexible server.
 *
 * @remarks
 * Configures backup retention and geo-redundancy.
 */
export interface MySqlBackup {
  /**
   * Backup interval in hours.
   *
   * @remarks
   * The frequency of automated backups. This value is typically managed by Azure.
   */
  readonly backupIntervalHours?: number;

  /**
   * Backup retention period in days.
   *
   * Constraints:
   * - Minimum: 1 day
   * - Maximum: 35 days
   *
   * @remarks
   * Number of days to retain automated backups.
   *
   * @example 7
   */
  readonly backupRetentionDays?: number;

  /**
   * Earliest restore point.
   *
   * @remarks
   * Read-only property. The earliest point in time to which you can restore.
   */
  readonly earliestRestoreDate?: string;

  /**
   * Geo-redundant backup configuration.
   *
   * Available values:
   * - Disabled: Geo-redundant backup is disabled
   * - Enabled: Geo-redundant backup is enabled
   *
   * @remarks
   * Enable to replicate backups to a paired Azure region.
   *
   * @example 'Enabled'
   */
  readonly geoRedundantBackup?: 'Disabled' | 'Enabled';
}

/**
 * Storage configuration for MySQL flexible server.
 *
 * @remarks
 * Defines storage size, auto-grow, and redundancy settings.
 */
export interface MySqlStorage {
  /**
   * Storage auto-grow configuration.
   *
   * Available values:
   * - Disabled: Storage auto-grow is disabled
   * - Enabled: Storage auto-grow is enabled
   *
   * @remarks
   * When enabled, storage automatically increases when approaching capacity.
   *
   * @example 'Enabled'
   */
  readonly autoGrow?: 'Disabled' | 'Enabled';

  /**
   * Auto IO scaling configuration.
   *
   * Available values:
   * - Disabled: Auto IO scaling is disabled
   * - Enabled: Auto IO scaling is enabled
   *
   * @remarks
   * When enabled, IOPS automatically scales based on workload.
   *
   * @example 'Enabled'
   */
  readonly autoIoScaling?: 'Disabled' | 'Enabled';

  /**
   * Provisioned IOPS.
   *
   * @remarks
   * The number of provisioned IOPS for the storage.
   */
  readonly iops?: number;

  /**
   * Log on disk configuration.
   *
   * Available values:
   * - Disabled: Log on disk is disabled
   * - Enabled: Log on disk is enabled
   *
   * @remarks
   * Determines whether transaction logs are stored on separate storage.
   *
   * @example 'Enabled'
   */
  readonly logOnDisk?: 'Disabled' | 'Enabled';

  /**
   * Storage size in gigabytes.
   *
   * Constraints:
   * - Minimum: 20 GB
   * - Maximum: 16384 GB (16 TB)
   *
   * @remarks
   * Total storage allocated to the server.
   *
   * @example 128
   */
  readonly storageSizeGB?: number;

  /**
   * Storage redundancy type.
   *
   * Available values:
   * - LocalRedundancy: Locally redundant storage
   * - ZoneRedundancy: Zone-redundant storage
   *
   * @remarks
   * The storage redundancy option for the server.
   *
   * @example 'ZoneRedundancy'
   */
  readonly storageRedundancy?: 'LocalRedundancy' | 'ZoneRedundancy';
}

/**
 * Network configuration for MySQL flexible server.
 *
 * @remarks
 * Configures public network access and virtual network integration.
 */
export interface MySqlNetwork {
  /**
   * Delegated subnet resource ID.
   *
   * @remarks
   * Resource ID of a subnet delegated to Microsoft.DBforMySQL/flexibleServers.
   * Used for private (VNet-integrated) deployment.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/virtualNetworks/{vnetName}/subnets/{subnetName}'
   */
  readonly delegatedSubnetResourceId?: string;

  /**
   * Private DNS zone resource ID.
   *
   * @remarks
   * Resource ID of the private DNS zone for private endpoint connections.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/privateDnsZones/{zoneName}'
   */
  readonly privateDnsZoneResourceId?: string;

  /**
   * Public network access configuration.
   *
   * Available values:
   * - Disabled: Public network access is disabled
   * - Enabled: Public network access is enabled
   *
   * @remarks
   * Controls whether the server is accessible from public networks.
   *
   * @example 'Disabled'
   */
  readonly publicNetworkAccess?: 'Disabled' | 'Enabled';
}

/**
 * High availability configuration for MySQL flexible server.
 *
 * @remarks
 * Configures high availability mode and standby availability zone.
 */
export interface MySqlHighAvailability {
  /**
   * High availability mode.
   *
   * Available values:
   * - Disabled: High availability is disabled
   * - SameZone: Same-zone high availability
   * - ZoneRedundant: Zone-redundant high availability
   *
   * @remarks
   * The high availability configuration for the server.
   *
   * @example 'ZoneRedundant'
   */
  readonly mode?: 'Disabled' | 'SameZone' | 'ZoneRedundant';

  /**
   * Standby availability zone.
   *
   * @remarks
   * The availability zone for the standby server (for ZoneRedundant mode).
   *
   * @example '2'
   */
  readonly standbyAvailabilityZone?: string;
}

/**
 * Maintenance window configuration.
 *
 * @remarks
 * Defines a custom maintenance window for the server.
 */
export interface MySqlMaintenanceWindow {
  /**
   * Custom window configuration.
   *
   * Available values:
   * - Disabled: Use default maintenance window
   * - Enabled: Use custom maintenance window
   *
   * @remarks
   * Whether to use a custom maintenance window.
   *
   * @example 'Enabled'
   */
  readonly customWindow?: 'Disabled' | 'Enabled';

  /**
   * Day of week (0-6, Sunday to Saturday).
   *
   * Constraints:
   * - Range: 0-6
   *
   * @remarks
   * The day of the week for the maintenance window.
   *
   * @example 0
   */
  readonly dayOfWeek?: number;

  /**
   * Start hour (0-23).
   *
   * Constraints:
   * - Range: 0-23
   *
   * @remarks
   * The start hour of the maintenance window.
   *
   * @example 2
   */
  readonly startHour?: number;

  /**
   * Start minute (0-59).
   *
   * Constraints:
   * - Range: 0-59
   *
   * @remarks
   * The start minute of the maintenance window.
   *
   * @example 0
   */
  readonly startMinute?: number;
}

/**
 * Data encryption configuration.
 *
 * @remarks
 * Configures customer-managed key encryption for the server.
 */
export interface MySqlDataEncryption {
  /**
   * Geo-backup encryption key URI.
   *
   * @remarks
   * The URI of the key vault key for geo-backup encryption.
   *
   * @example 'https://{keyVaultName}.vault.azure.net/keys/{keyName}/{keyVersion}'
   */
  readonly geoBackupKeyURI?: string;

  /**
   * Geo-backup user-assigned identity ID.
   *
   * @remarks
   * The resource ID of the user-assigned identity for geo-backup encryption.
   */
  readonly geoBackupUserAssignedIdentityId?: string;

  /**
   * Primary encryption key URI.
   *
   * @remarks
   * The URI of the key vault key for primary encryption.
   *
   * @example 'https://{keyVaultName}.vault.azure.net/keys/{keyName}/{keyVersion}'
   */
  readonly primaryKeyURI?: string;

  /**
   * Primary user-assigned identity ID.
   *
   * @remarks
   * The resource ID of the user-assigned identity for primary encryption.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identityName}'
   */
  readonly primaryUserAssignedIdentityId?: string;

  /**
   * Data encryption type.
   *
   * Available values:
   * - AzureKeyVault: Customer-managed key encryption
   * - SystemManaged: Platform-managed key encryption
   *
   * @remarks
   * The type of data encryption for the server.
   *
   * @example 'AzureKeyVault'
   */
  readonly type?: 'AzureKeyVault' | 'SystemManaged';
}

/**
 * Import source properties for creating from backup.
 *
 * @remarks
 * Configuration for importing data from a backup file.
 */
export interface MySqlImportSourceProperties {
  /**
   * Data directory path.
   *
   * @remarks
   * The path to the data directory in the storage account.
   */
  readonly dataDirPath?: string;

  /**
   * SAS token for storage access.
   *
   * Constraints:
   * - Sensitive data - not logged
   *
   * @remarks
   * Shared Access Signature token for accessing the storage account.
   */
  readonly sasToken?: string;

  /**
   * Storage type.
   *
   * Available values:
   * - AzureBlob: Azure Blob Storage
   *
   * @remarks
   * The type of storage where the backup is located.
   */
  readonly storageType?: 'AzureBlob';

  /**
   * Storage URL.
   *
   * @remarks
   * The URL of the storage account container.
   *
   * @example 'https://{storageAccountName}.blob.core.windows.net/{containerName}'
   */
  readonly storageUrl?: string;
}

/**
 * Properties for creating a new MySQL flexible server (Default mode).
 *
 * @remarks
 * Used when creating a new server from scratch.
 */
export interface MySqlPropertiesForDefaultCreate {
  /**
   * Administrator login username.
   *
   * Constraints:
   * - Required for Default create mode
   * - Length: 1-16 characters
   *
   * @remarks
   * The administrator username for the MySQL server.
   * Cannot be 'azure_superuser', 'admin', 'administrator', 'root', 'guest', or 'public'.
   *
   * @example 'myadmin'
   */
  readonly administratorLogin: string;

  /**
   * Administrator login password.
   *
   * Constraints:
   * - Required for Default create mode
   * - Length: 8-128 characters
   * - Sensitive data - not logged
   *
   * @remarks
   * The password for the administrator account.
   * Must contain characters from three of: uppercase, lowercase, numbers, special characters.
   *
   * @example 'MyP@ssw0rd123'
   */
  readonly administratorLoginPassword: string;

  /**
   * Availability zone.
   *
   * @remarks
   * The availability zone for the server.
   *
   * @example '1'
   */
  readonly availabilityZone?: string;

  /**
   * Backup configuration.
   */
  readonly backup?: MySqlBackup;

  /**
   * Server create mode.
   *
   * @remarks
   * Must be 'Default' for creating a new server.
   */
  readonly createMode: 'Default';

  /**
   * Data encryption configuration.
   */
  readonly dataEncryption?: MySqlDataEncryption;

  /**
   * High availability configuration.
   */
  readonly highAvailability?: MySqlHighAvailability;

  /**
   * Import source properties.
   */
  readonly importSourceProperties?: MySqlImportSourceProperties;

  /**
   * Maintenance window configuration.
   */
  readonly maintenanceWindow?: MySqlMaintenanceWindow;

  /**
   * Network configuration.
   */
  readonly network?: MySqlNetwork;

  /**
   * Replication role.
   *
   * Available values:
   * - None: No replication role
   * - Replica: Read replica
   * - Source: Source/primary server
   *
   * @remarks
   * The replication role for the server.
   *
   * @example 'Source'
   */
  readonly replicationRole?: 'None' | 'Replica' | 'Source';

  /**
   * Storage configuration.
   */
  readonly storage?: MySqlStorage;

  /**
   * MySQL server version.
   *
   * Available values:
   * - 5.7: MySQL 5.7
   * - 8.0.21: MySQL 8.0.21
   *
   * @example '8.0.21'
   */
  readonly version?: '5.7' | '8.0.21';
}

/**
 * Properties for geo-restoring a MySQL flexible server.
 *
 * @remarks
 * Used when restoring from a geo-redundant backup.
 */
export interface MySqlPropertiesForGeoRestore {
  /**
   * Availability zone.
   *
   * @remarks
   * The availability zone for the restored server.
   *
   * @example '1'
   */
  readonly availabilityZone?: string;

  /**
   * Server create mode.
   *
   * @remarks
   * Must be 'GeoRestore' for geo-restore operations.
   */
  readonly createMode: 'GeoRestore';

  /**
   * Data encryption configuration.
   */
  readonly dataEncryption?: MySqlDataEncryption;

  /**
   * Point in time to restore to.
   *
   * Constraints:
   * - Format: ISO 8601 date-time string
   *
   * @remarks
   * The point in time to restore to (optional for geo-restore).
   *
   * @example '2024-10-13T12:00:00Z'
   */
  readonly pointInTimeUTC?: string;

  /**
   * Source server resource ID.
   *
   * Constraints:
   * - Required for GeoRestore mode
   *
   * @remarks
   * The resource ID of the source server to restore from.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBforMySQL/flexibleServers/{serverName}'
   */
  readonly sourceServerResourceId: string;
}

/**
 * Properties for point-in-time restore of a MySQL flexible server.
 *
 * @remarks
 * Used when restoring from a backup at a specific point in time.
 */
export interface MySqlPropertiesForPointInTimeRestore {
  /**
   * Availability zone.
   *
   * @remarks
   * The availability zone for the restored server.
   *
   * @example '1'
   */
  readonly availabilityZone?: string;

  /**
   * Server create mode.
   *
   * @remarks
   * Must be 'PointInTimeRestore' for point-in-time restore operations.
   */
  readonly createMode: 'PointInTimeRestore';

  /**
   * Data encryption configuration.
   */
  readonly dataEncryption?: MySqlDataEncryption;

  /**
   * Point in time to restore to.
   *
   * Constraints:
   * - Required for PointInTimeRestore mode
   * - Format: ISO 8601 date-time string
   *
   * @remarks
   * The point in time to restore to. Must be within the backup retention period.
   *
   * @example '2024-10-13T12:00:00Z'
   */
  readonly pointInTimeUTC: string;

  /**
   * Source server resource ID.
   *
   * Constraints:
   * - Required for PointInTimeRestore mode
   *
   * @remarks
   * The resource ID of the source server to restore from.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBforMySQL/flexibleServers/{serverName}'
   */
  readonly sourceServerResourceId: string;
}

/**
 * Properties for creating a read replica of a MySQL flexible server.
 *
 * @remarks
 * Used when creating a read replica from a source server.
 */
export interface MySqlPropertiesForReplica {
  /**
   * Availability zone.
   *
   * @remarks
   * The availability zone for the replica server.
   *
   * @example '1'
   */
  readonly availabilityZone?: string;

  /**
   * Server create mode.
   *
   * @remarks
   * Must be 'Replica' for creating a read replica.
   */
  readonly createMode: 'Replica';

  /**
   * Data encryption configuration.
   */
  readonly dataEncryption?: MySqlDataEncryption;

  /**
   * Replication role.
   *
   * Available values:
   * - None: No replication role
   * - Replica: Read replica
   * - Source: Source/primary server
   *
   * @remarks
   * Must be 'Replica' for replica creation.
   *
   * @example 'Replica'
   */
  readonly replicationRole?: 'None' | 'Replica' | 'Source';

  /**
   * Source server resource ID.
   *
   * Constraints:
   * - Required for Replica mode
   *
   * @remarks
   * The resource ID of the source server to replicate from.
   *
   * @example '/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.DBforMySQL/flexibleServers/{serverName}'
   */
  readonly sourceServerResourceId: string;
}

/**
 * Union type for all MySQL flexible server property variants.
 *
 * @remarks
 * Discriminated union based on createMode property.
 */
export type MySqlFlexibleServerProperties =
  | MySqlPropertiesForDefaultCreate
  | MySqlPropertiesForGeoRestore
  | MySqlPropertiesForPointInTimeRestore
  | MySqlPropertiesForReplica;

/**
 * Microsoft.DBforMySQL/flexibleServers resource.
 *
 * @remarks
 * Represents an Azure Database for MySQL flexible server.
 * API Version: 2024-12-01-preview
 */
export interface MySqlFlexibleServer {
  /**
   * Managed identity configuration.
   *
   * @remarks
   * Configures managed identity for the server.
   */
  readonly identity?: MySqlIdentity;

  /**
   * Azure region for the server.
   *
   * Constraints:
   * - Required
   *
   * @remarks
   * The Azure region where the server will be deployed.
   *
   * @example 'eastus', 'westeurope'
   */
  readonly location: string;

  /**
   * Resource name.
   *
   * Constraints:
   * - Required
   * - Length: 1-63 characters
   * - Pattern: ^[a-z0-9][-a-z0-9]*(?<!-)$
   *
   * @remarks
   * The name of the MySQL flexible server. Must be globally unique across Azure.
   * Can contain lowercase letters, numbers, and hyphens.
   * Must start with alphanumeric and cannot end with hyphen.
   *
   * @example 'mymysqlserver'
   */
  readonly name: string;

  /**
   * Server properties.
   *
   * Constraints:
   * - Required
   *
   * @remarks
   * Configuration properties for the server based on the create mode.
   */
  readonly properties: MySqlFlexibleServerProperties;

  /**
   * SKU (pricing tier).
   *
   * Constraints:
   * - Required
   *
   * @remarks
   * Defines the compute and pricing tier for the server.
   */
  readonly sku: MySqlSku;

  /**
   * Resource tags.
   *
   * @remarks
   * Key-value pairs for organizing and filtering resources.
   *
   * @example { environment: 'production', costCenter: 'engineering' }
   */
  readonly tags?: Record<string, string>;
}

/**
 * Microsoft.DBforMySQL/flexibleServers/databases resource.
 *
 * @remarks
 * Represents a database within a MySQL flexible server.
 * API Version: 2024-12-01-preview
 */
export interface MySqlDatabase {
  /**
   * Database name.
   *
   * Constraints:
   * - Required
   * - Length: 1-64 characters
   *
   * @remarks
   * The name of the database to create on the server.
   *
   * @example 'myapp_db'
   */
  readonly name: string;

  /**
   * Database properties.
   */
  readonly properties?: {
    /**
     * Character set.
     *
     * @remarks
     * The character set for the database.
     *
     * @example 'utf8mb4'
     */
    readonly charset?: string;

    /**
     * Collation.
     *
     * @remarks
     * The collation for the database.
     *
     * @example 'utf8mb4_unicode_ci'
     */
    readonly collation?: string;
  };
}

/**
 * Microsoft.DBforMySQL/flexibleServers/firewallRules resource.
 *
 * @remarks
 * Represents a firewall rule for a MySQL flexible server.
 * API Version: 2024-12-01-preview
 */
export interface MySqlFirewallRule {
  /**
   * Firewall rule name.
   *
   * Constraints:
   * - Required
   * - Length: 1-128 characters
   *
   * @remarks
   * The name of the firewall rule.
   *
   * @example 'AllowAllAzureIPs'
   */
  readonly name: string;

  /**
   * Firewall rule properties.
   *
   * Constraints:
   * - Required
   */
  readonly properties: {
    /**
     * End IP address.
     *
     * Constraints:
     * - Required
     * - Must be a valid IPv4 address
     *
     * @remarks
     * The end IP address of the firewall rule range.
     * Use 0.0.0.0 for both start and end to allow all Azure IPs.
     *
     * @example '255.255.255.255'
     */
    readonly endIpAddress: string;

    /**
     * Start IP address.
     *
     * Constraints:
     * - Required
     * - Must be a valid IPv4 address
     *
     * @remarks
     * The start IP address of the firewall rule range.
     * Use 0.0.0.0 for both start and end to allow all Azure IPs.
     *
     * @example '0.0.0.0'
     */
    readonly startIpAddress: string;
  };
}

/**
 * Microsoft.DBforMySQL/flexibleServers/configurations resource.
 *
 * @remarks
 * Represents a server configuration parameter for a MySQL flexible server.
 * API Version: 2024-12-01-preview
 */
export interface MySqlConfiguration {
  /**
   * Configuration parameter name.
   *
   * Constraints:
   * - Required
   *
   * @remarks
   * The name of the MySQL server configuration parameter.
   *
   * @example 'max_connections', 'innodb_buffer_pool_size'
   */
  readonly name: string;

  /**
   * Configuration properties.
   */
  readonly properties?: {
    /**
     * Current value.
     *
   * @remarks
     * The current value of the configuration parameter.
     *
     * @example '151'
     */
    readonly currentValue?: string;

    /**
     * Source of the configuration value.
     *
     * Available values:
     * - system-default: System default value
     * - user-override: User-specified value
     *
     * @remarks
     * Indicates whether the value is system default or user-specified.
     */
    readonly source?: 'system-default' | 'user-override';

    /**
     * Configuration value.
     *
     * @remarks
     * The value to set for the configuration parameter.
     *
     * @example '200'
     */
    readonly value?: string;
  };
}
